<!DOCTYPE html>
<html>
<head>
  <title>Page Title</title>
  <meta charset="UTF-8"/>
</head>
<body>
  <script>
      // -- Pseudocode -- \\
      // ask player's selection (rock, paper, or scissors) - inputs case insensitive
      // computerPlay() will choose randomly and return a result computerSelection
      // playerSelection and computerSelection will be put into singleRound function
      // singleRound() will compare results and compute the winner,
      // then it will print a string depending on win or loss.
      // then it will add one to a win counter, or loss counter,
      // then game() will repeat the singleRound() function until win or loss counter hits 3,
      // then it will print a string reporting a winner,
      // then it will terminate the program (or ask to replay?)

      let winCounter = 0
      let lossCounter = 0
      let roundCounter = 1

      function playerPlay(){
          // Player types an input
          let playerInput = prompt("Round "+roundCounter+"! Enter your choice (Rock, paper, or scissors?): ", )
          let playerSelection

          // Properly capitalize input
          playerInput = parsePlayerInput(playerInput)

          // Define allowed inputs for the game
          const allowedInputs = ["Rock", "Paper", "Scissors"]

          // Sets playerSelection if input is allowed, otherwise requests restart
          if (allowedInputs.includes(playerInput)){
            playerSelection = playerInput
          }
          else {
            console.log("Please refresh and correct your spelling. You typed: "+playerInput+"!")
          }
          console.log("You chose: " + playerSelection)
          return playerSelection
      }

      function parsePlayerInput(input) {
        // Properly capitalize input
        return input.charAt(0).toUpperCase()+input.slice(1).toLowerCase()
      }

      function computerPlay(){
          // randomly chooses rock, paper, or scissors
          let npcRand = Math.floor(Math.random()*3);
          let computerSelection

          if (npcRand === 0){
            computerSelection = "Rock"
          }
          else if (npcRand === 1){
            computerSelection = "Paper"
          }
          else {
            computerSelection = "Scissors"
          }
          console.log("The Computer chose: " + computerSelection)
          return computerSelection
      }

      function singleRound(playerSelection, computerSelection){
          //plays a single round and adds to win or loss counter
          let singleRoundResult

          if (playerSelection === "Rock" && computerSelection === "Scissors"){
            singleRoundResult = "You win this round!"
            winCounter++
          }
          else if (playerSelection === "Paper" && computerSelection === "Rock"){
            singleRoundResult = "You win this round!"
            winCounter++
          }
          else if (playerSelection === "Scissors" && computerSelection === "Paper"){
            singleRoundResult = "You win this round!"
            winCounter++
          }
          else if (playerSelection.localeCompare(computerSelection) == 0){
            singleRoundResult = "It's a tie!"
          }
          else {
            singleRoundResult = "You lost this round."
            lossCounter++
          }
          console.log(singleRoundResult)
          return singleRoundResult
      }

      function game(){
        // game repeats single rounds until win or loss count is 3 (best of 5)
        while (winCounter < 3 && lossCounter < 3) {
          singleRound(playerPlay(), computerPlay())
          roundCounter++
        }
        if (winCounter == 3){
          console.log("You've won the best of five! Refresh the page to play again.")
        }
        else{
          console.log("You've lost the best of five :( Refresh to try again!")
        }
      }

      game()

  </script>
</body>
</html>